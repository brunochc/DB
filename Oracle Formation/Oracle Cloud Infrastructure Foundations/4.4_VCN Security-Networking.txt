Welcome back to this lesson on VCN security.

So within VCN, you have this concept of security list. Think about security list as firewall rules associated with a subnet and applied to all instances inside the subnet. So what does it look like? The security list consists of rules that specify the type of traffic allowed in or out of the subnet. This applies to a given instance, whether it is talking with another instance in the VCN or a host outside the VCN.

And you can see a couple of entries here. These rules can be stateful or stateless. Stateful means that if traffic is allowed in a particular port, allowed in, it is always allowed out from that port, and vice versa.

So you can see here a couple of examples. Traffic is coming in at port 80, and the traffic is coming in from anywhere on the web. So that's 0.0.0.0/0. That's the source. Can be anywhere. Protocol is TCP. And it's coming at port 80. That's web traffic.

And the second rule says the traffic is going from the first subnet to the second subnet. So you see the source is the IP, the CIDR block for the first subnet, and it's actually the egress traffic. So it's the source for the second subnet, the private subnet. And the traffic is going on port 1521. That's Oracle database port.

And you can see, similarly for the private subnet, you have their own firewall rules. And in this case, it's saying that because it's a private subnet, you don't want any kind of web traffic. So the only rule here is the traffic coming from the public subnet, from the web server, so that the source CIDR is 10.0.1.0/24 and the port is 1521, right? So this is how you would define security lists within an OCI VCN service.

Now, there's also another concept, which is called network security groups, or NSG. These are very similar construct as security list, but the key difference is these apply only to a set of virtual network interface cards in a single VCN. And another big difference here is NSGs can be the source or destination in the rules. Contrast this with the security list rules where you specify a CIDR, only a CIDR, as the source or destination.

So as you can see here in this example, the egress traffic, the source is NSG B. So that's the NSG which is attached to my database. Similarly for the second network security group, you can see that the source is the first network security group. That's NSG A.

Also one thing to keep in mind-- that as you leverage network security groups, because they apply to individual VNICs, now you could have two instances in a single subnet, and they can have different security constructs. So one can have NSG with different kind of rules, and the other instance, you can see, has an NSG-- in this case, we say NSG C. It has different sets of rule. Right? So you could have that kind of scenario enabled by using network security groups.

So that's it. Just to recap, there are two mechanisms to create these firewall rules in OCI VCN. One is a security list, and the other is network security groups. Thanks for watching. 