Welcome to this demo on OCI load balancer. In this particular demo, this is the scenario or the topology we are going to use. So you see a VCN here with two subnets, a public subnet and a private subnet, and two web servers. And these web servers are instantiated inside the private subnet, meaning they don't have public IP address. And that's OK because the load balancer is in the public subnet. And these web servers act as backends to the load balancer.

So this is the setup we are going to run for this demo. So let's get started. The first thing we need to do is to create a Virtual Cloud Network. So I'll click on Networking, click on Virtual cloud network, and bring up the VCN wizard to create the Virtual Cloud Network. So I can see there are no networks here. And I'm in the sandbox compartment.

So click on Start VCN Wizard. And I'm going to use this particular setup, VCN with internet connectivity. So click on Start VCN Wizard. Let's provide a name for the VCN. So let's say this is my load balancer VCN. And sandbox compartment is fine. And it's giving me a CIDR block for the VCN and the subnets. I'm OK with these CIDR blocks. And I'll go hit Next and click Create.

And now my VCN will get created. Now, one thing, if you recall from the diagram, we need to do is to modify the security list because we need to add a rule in the security list which will allow traffic on port 80 because that's where the web servers are running on those compute instances. So I'll come here. And then I'll hit Security Lists for this one. And the default security list is the one which is used with the public subnet. So I'll click on Default Security List here.

And you can see it has these ingress rules right now. So there's traffic on port 22, which is allowed, and there are a couple of ICMP traffic rules which are there. So I'll click on Add Ingress Rule. And I'll say for the source I have acquired 0 IP address, meaning traffic coming from all networks, all IP addresses. And the destination port is port 80. So click that. And then I'll add this ingress rule. So now we have modified the security list to allow traffic to come to port 80.

So the next step for us is to go ahead and create a couple of compute instances, web servers, where we will install Apache. And these will act as backends to the load balancer. So I'll click on the navigation menu and click on Compute. And I'll go ahead and instantiate a couple of instances, which will act as the backend for the load balancer.

So it gives me a default name. I'll say this is my web server 1. Sandbox compartment is fine. OK with all the availability domains, all these options. Image and shape look OK. And right here, under Networking, it picks up the load balancer VCN we just created. But instead of putting this in a public subnet, we are going to choose Private subnet. And remember, this will ensure that these web servers don't get a public IPv4 address. And we are also not going to SSH into these machines. So we'll say No SSH is fine here.

And then right below, under advanced options, we have an option to provide a startup script. So we'll just put the startup script here. And the startup script is pretty straightforward. It's a bash script. It's basically installing Apache. And it's saying that it's changing the home page, saying that I'm web server 1 or something. And you can read more on what startup scripts do. So I'll click Create here with these options. And my instance will get created.

As the first instance is getting created, let's go ahead and create another instance, which will be my web server 2. So I'll click on Create Instance. And we'll call this web server 2. All the default options look good. For networking, we will again choose a private subnet. And basically, this will mean that-- let me just-- all right.

So private subnet, it will ensure that they don't get a public IPv4 address. Click No SSH. And right here, like web server 1, we'll provide a startup script. But this time, we will change this to say web server 2. Just making sure all the options look good. It's still private subnet here, load balancer. And web server 2 is fine. So hit Create.

And this will take literally a few seconds, 20, 25 seconds. And both my web servers will be up and running. And as soon as the web servers are up and running, we'll go ahead and provision a load balancer and put these web servers as backend to the load balancer. So if I click Instance here, I can see that the web servers are-- one web server is already running. And the second web server is getting provisioned.

So as this is happening, let's go ahead and click on Networking. And click on Load balancer here. And hopefully, by the time we hit creating the load balancer, those web servers are up and running. So you can see here, there are no load balancers. So I can click on Create load balancer. And it gives me option to create a layer 4 load balancer, also referred to as network load balancer, or a layer 7 load balancer. So I'm OK with creating a layer 7 load balancer. So click on that. And click on Create load balancer.

And here, it's a workflow which again is quite simple. It just walks you through the steps required to create a load balancer. So we're interested in creating a public load balancer. We'll have an ephemeral IP address under the bandwidth. Just choose the default options, which are provided here. And for the network, it's important. Now we pick the public subnet because the load balancer is actually instantiated in the public subnet. So this looks fine. Click Next.

And for the load balancer algorithm, there are multiple options. So there is weighted round robin, there is IP hash, and least connections. In our case, we will choose weighted round robin. And basically, what this means is the policy distributes incoming traffic sequentially to each server in a backend set list.

So right here is the place where we add the backends. And click on Add backends. And here, you can see both web server 1 and web server 2 are running. So I'll just click them and add them as backends. And that's it. My backends are added.

And if you scroll down, all these default values, I'm just going to leave them as is. So basically, this is saying that we are performing some health check to confirm the availability of backend servers. And the health check is performed using HTTP protocol at port 80. That's where my web server is running. So all this looks good. Click Next.

And the last step is to configure a listener. Listener is a logical entity that checks for incoming traffic on the load balancer's public IP address because we are running a web server. So we are going to use HTTP. And we are going to use port 80. So that's the value we are going to use. And we're going to-- it's a basic demo, so we are going to disable any kind of logging here. And I'll hit Submit.

And literally, again, this will take less than a minute. And the load balancer will be up and running. And once the load balancer is up and running, we'll test it. And one thing to note would be right now, you see the backend set health as pending because it is instantiating the load balancer. It's bringing the backend. Once all the setup is complete, you will see that this status will change from pending to OK. And the color will change to green.

So let me hit pause here, give it a couple of minutes or less than a minute and come back, and the load balancer will be up and running. And as you can see here, it took literally 30 seconds or so. And the load balancer is up and running. And now, the backend set health has also turned green. It says OK. And I can pick this public IP address and paste it in my browser window and bring up the backend sets-- the backends we just provisioned.

So it says connection is not secure. Of course, we did HTTP. And right here, you can see it says-- let me zoom in a little bit more. You can see it says Hello World! My name is web server 2. If I refresh the browser again, it says web server 1, web server 2, web server 1, web server 2. So this is weighted round robin in action.

And you can get a lot of information about the load balancer, all the metrics, the backend set, health check, et cetera. There's a lot of advanced functionality there. So this is how simple it is to create a load balancer. We created one with two backend sets. It's quite straightforward process. So hope you found this demo useful. Thanks for watching. 